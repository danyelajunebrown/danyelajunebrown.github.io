<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Display Webcam Stream</title>
 
<style>
body {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    cursor: none;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
    animation: boatSway 4s ease-in-out infinite;
}

@keyframes boatSway {
    0% { transform: rotate(0deg) translateY(0px); }
    25% { transform: rotate(0.5deg) translateY(-2px); }
    50% { transform: rotate(0deg) translateY(-4px); }
    75% { transform: rotate(-0.5deg) translateY(-2px); }
    100% { transform: rotate(0deg) translateY(0px); }
}

.custom-cursor {
    width: 32px;
    height: 32px;
    position: fixed;
    pointer-events: none;
    z-index: 9999;
    mix-blend-mode: difference;
    display: none;
}
@media (pointer: fine) {
    .custom-cursor { display: block; }
}
.custom-cursor svg {
    width: 100%;
    height: 100%;
    animation: trotAlong 0.6s infinite alternate;
    fill: white;
}
@keyframes trotAlong {
    0% { transform: translateY(0) rotate(-5deg); }
    100% { transform: translateY(-3px) rotate(5deg); }
}

#container {
    margin: 0px auto;
    width: 100vw;
    height: 100vh;
    border: 10px #333 solid;
    position: relative;
    box-sizing: border-box;
}

#videoElement {
    width: 100%;
    height: 100%;
    background-color: #666;
    object-fit: cover;
}

.nav-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    padding: 15px 0;
    z-index: 2000;
    text-align: center;
}

.nav-menu a {
    color: white;
    text-decoration: none;
    padding: 10px 20px;
    margin: 0 10px;
    font-size: 18px;
    border: 2px solid transparent;
    transition: all 0.3s ease;
    cursor: pointer;
}

.nav-menu a:hover {
    border-bottom: 2px solid white;
}

#toolsBtn.active {
    border-bottom: 2px solid white;
}

/* Tools Dropdown Styling */
.tools-dropdown {
    position: fixed;
    top: 55px;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 0;
    z-index: 1999;
    display: flex;
    flex-direction: column;
    gap: 10px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
}

.tools-dropdown.show {
    opacity: 1;
    pointer-events: all;
}

.tool-link {
    color: white;
    text-decoration: none;
    padding: 10px 20px;
    font-size: 18px;
    text-align: center;
    border: 2px solid transparent;
    transition: all 0.3s ease;
    cursor: pointer;
    white-space: nowrap;
    font-family: Arial, sans-serif;
    opacity: 0;
    transform: translateX(-50px) rotate(-8deg);
}

/* Dragon tail wave animation - more dramatic */
.tools-dropdown.show .tool-link {
    animation: whipWave 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    animation-delay: calc(var(--item-index) * 0.1s);
}

@keyframes whipWave {
    0% {
        opacity: 0;
        transform: translateX(-50px) rotate(-8deg) scale(0.8);
    }
    60% {
        transform: translateX(8px) rotate(3deg) scale(1.05);
    }
    100% {
        opacity: 1;
        transform: translateX(0) rotate(0deg) scale(1);
    }
}

.tool-link:hover {
    border-bottom: 2px solid white;
    transform: translateX(5px) scale(1.05);
}

.name-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1500;
    color: white;
    font-size: 4rem;
    font-weight: bold;
    text-align: center;
    text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);
    letter-spacing: 2px;
    pointer-events: none;
    animation: nameGlow 3s ease-in-out infinite alternate;
}

@keyframes nameGlow {
    0% { text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8), 0 0 20px rgba(255, 255, 255, 0.3); }
    100% { text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8), 0 0 30px rgba(255, 255, 255, 0.5); }
}

/* Responsive adjustments */
@media (max-width: 768px) {            
    .nav-menu a {
        padding: 8px 10px;
        margin: 0 5px;
        font-size: 16px;
    }
    
    .name-overlay {
        font-size: 2.5rem;
        letter-spacing: 1px;
    }

    .tools-dropdown {
        top: 50px;
        padding: 8px 0;
    }

    .tool-link {
        padding: 8px 15px;
        font-size: 16px;
    }
}

@media (max-width: 480px) {
    .name-overlay {
        font-size: 2rem;
    }

    .nav-menu a {
        padding: 6px 8px;
        margin: 0 3px;
        font-size: 14px;
    }

    .tool-link {
        padding: 6px 12px;
        font-size: 14px;
    }
}
</style>
</head>
 
<body>
<nav class="nav-menu">
    <a href="bio.html">BIO</a>
    <a href="#" onclick="linkToCV(); return false;">CV</a>
    <a href="projects.html">PROJECTS</a>
    <a href="contact.html">CONTACT</a>
    <a href="#" id="toolsBtn" onclick="toggleToolsMenu(); return false;">TOOLS</a>
</nav>

<div class="tools-dropdown" id="toolsDropdown">
    <a href="toolbelt/ButMakeItCunt.html" class="tool-link" style="--item-index: 0;">Make It Cunt</a>
    <a href="toolbelt/KeepMeRollingJuice.html" class="tool-link" style="--item-index: 1;">Keep Me Rolling</a>
    <a href="toolbelt/plycutter.html" class="tool-link" style="--item-index: 2;">Plycutter</a>
    <a href="toolbelt/STLSplitter.html" class="tool-link" style="--item-index: 3;">STL Buster</a>
    <a href="toolbelt/index.html" class="tool-link" style="--item-index: 4;">The Feels</a>
    <a href="toolbelt/damages.html" class="tool-link" style="--item-index: 5;">For Damages</a>
    <a href="toolbelt/dance-clips.html" class="tool-link" style="--item-index: 6;">I'm In Charge of the Girls</a>
</div>

<div class="custom-cursor">
    <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
        <path d="M16 4C14 4 12 5 11 7L8 12L6 14C5 15 5 17 6 18C7 19 9 19 10 18L12 16V24C12 26.2 13.8 28 16 28C18.2 28 20 26.2 20 24V16L22 18C23 19 25 19 26 18C27 17 27 15 26 14L24 12L21 7C20 5 18 4 16 4Z"/>
    </svg>
</div>

<div id="container">
    <video autoplay playsinline muted id="videoElement"></video>
    <div class="name-overlay">Danyela June Brown</div>
</div>

<!-- Hidden canvas for capturing screenshots -->
<canvas id="screenshotCanvas" style="display: none;"></canvas>

<script>
// Global variable to store the captured frame
window.capturedCameraFrame = null;

function captureCurrentFrame() {
    const video = document.getElementById('videoElement');
    const canvas = document.getElementById('screenshotCanvas');
    const ctx = canvas.getContext('2d');
    
    if (video && video.videoWidth > 0 && video.videoHeight > 0) {
        // Set canvas size to match video
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        
        // Draw the current video frame to canvas
        ctx.drawImage(video, 0, 0);
        
        // Convert to data URL and store globally
        window.capturedCameraFrame = canvas.toDataURL('image/jpeg', 0.8);
        console.log('Screenshot captured successfully');
        return true;
    } else {
        console.log('Video not ready for capture');
        return false;
    }
}

function linkToCV() {
    const currentPage = encodeURIComponent(window.location.href);
    
    // Try to capture current frame before navigating
    const captured = captureCurrentFrame();
    
    if (captured && window.capturedCameraFrame) {
        // Store the image data in sessionStorage instead of URL
        sessionStorage.setItem('capturedFrame', window.capturedCameraFrame);
        sessionStorage.setItem('fromPage', window.location.href);
        window.location.href = 'cv.html';
    } else {
        // Navigate without captured image if capture failed
        window.location.href = 'cv.html';
    }
}

// Toggle tools dropdown menu
function toggleToolsMenu() {
    const dropdown = document.getElementById('toolsDropdown');
    const toolsBtn = document.getElementById('toolsBtn');
    
    if (dropdown.classList.contains('show')) {
        dropdown.classList.remove('show');
        toolsBtn.classList.remove('active');
    } else {
        dropdown.classList.add('show');
        toolsBtn.classList.add('active');
    }
}

// Close dropdown when clicking outside
document.addEventListener('click', function(event) {
    const dropdown = document.getElementById('toolsDropdown');
    const toolsBtn = document.getElementById('toolsBtn');
    
    if (!dropdown.contains(event.target) && event.target !== toolsBtn) {
        dropdown.classList.remove('show');
        toolsBtn.classList.remove('active');
    }
});

// Auto-start camera when page loads
window.addEventListener('load', async function() {
    const video = document.getElementById('videoElement');
    
    try {
        const stream = await navigator.mediaDevices.getUserMedia({ 
            video: true, 
            audio: false 
        });
        
        video.srcObject = stream;
        
        // Wait for video to be ready, then capture one frame
        video.addEventListener('loadeddata', function() {
            console.log('Video loaded, ready for capture');
            // Capture just one frame after a short delay to ensure video is playing
            setTimeout(() => {
                captureCurrentFrame();
            }, 1000);
        });
        
    } catch (error) {
        console.error('Camera access denied or not available:', error);
        // You could add a fallback background image here if needed
    }
});

// Custom cursor for desktop
if (window.matchMedia("(pointer: fine)").matches) {
    document.addEventListener('mousemove', function(e) {
        const cursor = document.querySelector('.custom-cursor');
        cursor.style.left = e.clientX - 16 + 'px';
        cursor.style.top = e.clientY - 16 + 'px';
    });
}
</script>
</body>
</html>
